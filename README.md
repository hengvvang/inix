# Personal NixOS Configuration

ä¸€ä¸ªæ¨¡å—åŒ–çš„ NixOS é…ç½®ï¼Œæ”¯æŒå¤šç”¨æˆ·ã€å¤šä¸»æœºä»¥åŠå¤šæ¡Œé¢ç¯å¢ƒã€‚åŸºäº Flake æ„å»ºï¼Œä½¿ç”¨ Home Manager è¿›è¡Œç”¨æˆ·é…ç½®ç®¡ç†ã€‚

## ğŸ–¥ï¸ æ”¯æŒçš„æ¡Œé¢ç¯å¢ƒ

### å®Œæ•´æ¡Œé¢ç¯å¢ƒ
| æ¡Œé¢ç¯å¢ƒ  | çŠ¶æ€ | æè¿° |
|-----------|------|------|
| KDE       | âœ…   | Plasma æ¡Œé¢ç¯å¢ƒ |
| GNOME     | âœ…   | GNOME æ¡Œé¢ç¯å¢ƒ |
| Cosmic    | âœ…   | System76 çš„ Cosmic æ¡Œé¢ |

### Wayland çª—å£ç®¡ç†å™¨
| çª—å£ç®¡ç†å™¨ | çŠ¶æ€ | æè¿° |
|------------|------|------|
| Hyprland   | âœ…   | åŸºäº wlroots çš„åŠ¨æ€å¹³é“ºåˆæˆå™¨ |
| Niri       | âœ…   | åŸºäº Smithay çš„æ»šåŠ¨å¹³é“ºåˆæˆå™¨ |

## ğŸ“‚ é…ç½®æ–¹æ³•

æœ¬é¡¹ç›®ä¸º dotfiles æä¾›äº†ä¸‰ç§é…ç½®æ–¹æ³•ï¼š

### 1. Directï¼ˆç›´æ¥é…ç½®ï¼‰
é€‚åˆè½»é‡çº§é…ç½®ï¼Œç›´æ¥ä½¿ç”¨æ¨¡æ¿æ–‡ä»¶ã€‚

### 2. Externalï¼ˆå¤–éƒ¨é…ç½®ï¼‰
æœ€ç®€å•çš„é…ç½®æ–¹å¼ï¼Œæ— éœ€æ·±å…¥äº†è§£ Home Manager é…ç½®æ–‡æ¡£ã€‚é…ç½®æ–‡ä»¶å­˜æ”¾åœ¨å¤–éƒ¨ç›®å½•ä¸­ã€‚

### 3. Home Managerï¼ˆåŸç”Ÿé…ç½®ï¼‰
æ›´ç¬¦åˆ Nix å“²å­¦ï¼Œä½†ä¾èµ–ç¤¾åŒºæ”¯æŒã€‚ç›´æ¥åœ¨ Nix é…ç½®ä¸­å®šä¹‰ã€‚

> **æ³¨æ„**: ç”±äºæˆ‘åªä½¿ç”¨å…¶ä¸­ä¸€éƒ¨åˆ†å·¥å…·ï¼Œæ— æ³•ä¿è¯æ‰€æœ‰é…ç½®éƒ½èƒ½æ­£å¸¸å·¥ä½œã€‚

## ğŸ› ï¸ æ”¯æŒçš„å·¥å…·

### Shell
- **Fish** - ç”¨æˆ·å‹å¥½çš„ shell
- **Bash** - ä¼ ç»Ÿ shell
- **Zsh** - é«˜çº§ shell
- **Nushell** - ç°ä»£ç»“æ„åŒ– shell

### ç»ˆç«¯æ¨¡æ‹Ÿå™¨
- **Alacritty** - GPU åŠ é€Ÿç»ˆç«¯
- **Ghostty** - ç°ä»£ç»ˆç«¯æ¨¡æ‹Ÿå™¨
- **Rio** - ç¡¬ä»¶åŠ é€Ÿç»ˆç«¯

### ç»ˆç«¯å¤šè·¯å¤ç”¨å™¨
- **Tmux** - ä¼ ç»Ÿç»ˆç«¯å¤šè·¯å¤ç”¨å™¨
- **Zellij** - ç°ä»£ç»ˆç«¯å¤šè·¯å¤ç”¨å™¨

### æ–‡ä»¶ç®¡ç†å™¨
- **Yazi** - ç»ˆç«¯æ–‡ä»¶ç®¡ç†å™¨

### ç¼–è¾‘å™¨
- **Vim** - ç»å…¸ç¼–è¾‘å™¨
- **VS Code** - ç°ä»£ç¼–è¾‘å™¨
- **Zed** - é«˜æ€§èƒ½ç¼–è¾‘å™¨

### å…¶ä»–å·¥å…·
- **Rmpc** - MPD å®¢æˆ·ç«¯
- **Starship** - è·¨ shell æç¤ºç¬¦
- **Git & Lazygit** - ç‰ˆæœ¬æ§åˆ¶
- **Rofi** - åº”ç”¨å¯åŠ¨å™¨
- ç­‰ç­‰...

## ğŸ“ é¡¹ç›®ç»“æ„

```
â”œâ”€â”€ flake.nix              # ä¸» Flake é…ç½®æ–‡ä»¶
â”œâ”€â”€ flake.lock            # é”å®šæ–‡ä»¶
â”œâ”€â”€ home/                 # Home Manager é…ç½®
â”‚   â”œâ”€â”€ desktop/          # æ¡Œé¢ç¯å¢ƒé…ç½®
â”‚   â”‚   â”œâ”€â”€ cosmic/       # Cosmic æ¡Œé¢
â”‚   â”‚   â”œâ”€â”€ gnome/        # GNOME æ¡Œé¢
â”‚   â”‚   â”œâ”€â”€ kde/          # KDE æ¡Œé¢
â”‚   â”‚   â”œâ”€â”€ hyprland/     # Hyprland çª—å£ç®¡ç†å™¨
â”‚   â”‚   â””â”€â”€ niri/         # Niri çª—å£ç®¡ç†å™¨
â”‚   â”œâ”€â”€ develop/          # å¼€å‘ç¯å¢ƒé…ç½®
â”‚   â”œâ”€â”€ dotfiles/         # å„ç§å·¥å…·çš„é…ç½®æ–‡ä»¶
â”‚   â”œâ”€â”€ pkgs/             # ç”¨æˆ·çº§è½¯ä»¶åŒ…
â”‚   â”œâ”€â”€ profiles/         # ç”¨æˆ·é…ç½®æ–‡ä»¶ï¼ˆå­—ä½“ã€ä¸»é¢˜ç­‰ï¼‰
â”‚   â””â”€â”€ services/         # ç”¨æˆ·æœåŠ¡
â”œâ”€â”€ hosts/                # ä¸»æœºé…ç½®
â”‚   â”œâ”€â”€ host1/            # ä¸»æœº1é…ç½®
â”‚   â”œâ”€â”€ host2/            # ä¸»æœº2é…ç½®
â”‚   â””â”€â”€ host3/            # ä¸»æœº3é…ç½®
â”œâ”€â”€ system/               # ç³»ç»Ÿçº§é…ç½®
â”‚   â”œâ”€â”€ desktop/          # ç³»ç»Ÿçº§æ¡Œé¢é…ç½®
â”‚   â”œâ”€â”€ locale/           # æœ¬åœ°åŒ–é…ç½®
â”‚   â”œâ”€â”€ pkgs/             # ç³»ç»Ÿçº§è½¯ä»¶åŒ…
â”‚   â”œâ”€â”€ profiles/         # ç³»ç»Ÿé…ç½®æ–‡ä»¶
â”‚   â””â”€â”€ services/         # ç³»ç»ŸæœåŠ¡
â”œâ”€â”€ users/                # ç”¨æˆ·é…ç½®
â”œâ”€â”€ lib/                  # è‡ªå®šä¹‰åº“å‡½æ•°
â”œâ”€â”€ overlays/             # Nix overlays
â””â”€â”€ pkgs/                 # è‡ªå®šä¹‰è½¯ä»¶åŒ…
```

## ğŸ”§ å·¥ä½œåŸç†

é…ç½®ç³»ç»ŸåŸºäºæ¨¡å—åŒ–è®¾è®¡ï¼š

```
flake.nix  <--  host/* (å¯ç”¨åŠŸèƒ½)  <--  system/* (å®šä¹‰åŠŸèƒ½)
           <--  user/* (å¯ç”¨åŠŸèƒ½)  <--  home/* (å®šä¹‰åŠŸèƒ½)
```

### ç³»ç»Ÿé…ç½®å±‚æ¬¡
- **system/desktop/** - æ¡Œé¢ç¯å¢ƒç³»ç»Ÿçº§é…ç½®
- **system/locale/** - è¯­è¨€å’Œè¾“å…¥æ³•é…ç½®
- **system/pkgs/** - ç³»ç»Ÿçº§è½¯ä»¶åŒ…åˆ†ç±»
- **system/services/** - ç³»ç»ŸæœåŠ¡é…ç½®

### ç”¨æˆ·é…ç½®å±‚æ¬¡
- **home/desktop/** - æ¡Œé¢ç¯å¢ƒç”¨æˆ·çº§é…ç½®
- **home/develop/** - å¼€å‘ç¯å¢ƒé…ç½®
- **home/dotfiles/** - å„ç§å·¥å…·çš„é…ç½®æ–‡ä»¶
- **home/services/** - ç”¨æˆ·çº§æœåŠ¡

## ğŸš€ å¿«é€Ÿå¼€å§‹

1. å…‹éš†ä»“åº“ï¼š
```bash
git clone <repository-url> ~/.config/nixos
cd ~/.config/nixos
```

2. æ ¹æ®ä½ çš„éœ€æ±‚ä¿®æ”¹ä¸»æœºé…ç½®ï¼ˆ`hosts/` ç›®å½•ï¼‰

3. æ„å»ºå¹¶åˆ‡æ¢é…ç½®ï¼š
```bash
sudo nixos-rebuild switch --flake .#<hostname>
```

4. åº”ç”¨ Home Manager é…ç½®ï¼š
```bash
home-manager switch --flake .#<username>@<hostname>
```

## ğŸ“ ä½¿ç”¨è¯´æ˜

### å¯ç”¨æ¡Œé¢ç¯å¢ƒ

åœ¨ä½ çš„ä¸»æœºé…ç½®ä¸­è®¾ç½®ï¼š
```nix
# å¯ç”¨æ¡Œé¢ç¯å¢ƒ
mySystem.desktop.enable = true;
mySystem.desktop.preset = "hyprland";  # æˆ– "niri", "gnome", "kde", "cosmic"
```

### é…ç½®ç”¨æˆ·ç¯å¢ƒ

åœ¨ç”¨æˆ·é…ç½®ä¸­å¯ç”¨æ‰€éœ€åŠŸèƒ½ï¼š
```nix
# å¯ç”¨æ¡Œé¢é…ç½®
myHome.desktop.enable = true;
myHome.desktop.hyprland.enable = true;  # å¯¹åº”çš„æ¡Œé¢ç¯å¢ƒ

# å¯ç”¨ dotfiles
myHome.dotfiles.fish.enable = true;
myHome.dotfiles.starship.enable = true;
```

## ğŸ” ç‰¹åˆ«è¯´æ˜

### Niri é…ç½®
- ä½¿ç”¨ External æ–¹æ³•é…ç½®ï¼Œé…ç½®æ–‡ä»¶ä½äº `home/desktop/niri/external/`
- åŒ…å«å®Œæ•´çš„ Wayland ç”Ÿæ€ç³»ç»Ÿå·¥å…·
- å·²å»é™¤ç»ˆç«¯é…ç½®ï¼ˆä½¿ç”¨ä½ çš„ dotfiles é…ç½®ï¼‰
- ä¸“æ³¨äºæ¡Œé¢ç¯å¢ƒæ ¸å¿ƒåŠŸèƒ½

### Hyprland é…ç½®
- æä¾›å®Œæ•´çš„ Hyprland ç”Ÿæ€ç³»ç»Ÿ
- åŒ…å«ç³»ç»Ÿçº§å’Œç”¨æˆ·çº§é…ç½®
- æ”¯æŒ XWayland åº”ç”¨

## ğŸ“š æ–‡æ¡£

æ›´å¤šè¯¦ç»†æ–‡æ¡£è¯·æŸ¥çœ‹ `docs/` ç›®å½•ï¼š
- [æ–‡ä»¶åè§£è€¦æŒ‡å—](docs/file-name-decoupling.md)
- [Flatpak ä¸ Nixpkgs å†²çªè§£å†³](docs/flatpak-nixpkgs-conflict-resolution.md)
- [Mihomo ä½¿ç”¨æŒ‡å—](docs/mihomo-usage-guide.md)
- [MPD + RMPC è®¾ç½®æŒ‡å—](docs/mpd-rmpc-setup-guide.md)
- [ä»£ç†æœåŠ¡è®¾ç½®æŒ‡å—](docs/proxy-services-setup-guide.md)
- ç­‰ç­‰...

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ã€‚
```
