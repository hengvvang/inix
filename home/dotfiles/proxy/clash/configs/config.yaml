# Clash 基础配置模板
# 这个文件会被订阅配置覆盖，主要用作备用配置

# HTTP(S) 和 SOCKS5 服务端口
port: 7890
socks-port: 7891

# HTTP(S) 和 SOCKS5 混合端口 (推荐使用)
mixed-port: 7890

# 透明代理端口
redir-port: 7892

# TUN 模式配置
tun:
  enable: true
  stack: system # gvisor
  dns-hijack:
    - 198.18.0.2:53
  auto-route: true
  auto-detect-interface: true

# 允许局域网连接
allow-lan: true

# 绑定地址
bind-address: '*'

# 运行模式: rule / global / direct
mode: rule

# 日志级别: silent / error / warning / info / debug
log-level: info

# RESTful API 端口
external-controller: 0.0.0.0:9090

# RESTful API Secret
secret: ""

# DNS 配置
dns:
  enable: true
  listen: 0.0.0.0:53
  ipv6: false
  enhanced-mode: fake-ip
  fake-ip-range: 198.18.0.1/16
  fake-ip-filter:
    - '*.lan'
    - localhost.ptlogin2.qq.com
  nameserver:
    - 223.5.5.5
    - 114.114.114.114
  fallback:
    - 8.8.8.8
    - 1.1.1.1
    - tls://dns.cloudflare.com:853
    - https://dns.cloudflare.com/dns-query

# 代理组 (这些会被订阅配置覆盖)
proxy-groups:
  - name: "🚀 手动切换"
    type: select
    proxies:
      - DIRECT

  - name: "🎯 全球直连"
    type: select
    proxies:
      - DIRECT

  - name: "🐟 漏网之鱼"
    type: select
    proxies:
      - "🚀 手动切换"
      - DIRECT

# 规则
rules:
  # 局域网直连
  - DOMAIN-SUFFIX,local,DIRECT
  - IP-CIDR,127.0.0.0/8,DIRECT
  - IP-CIDR,172.16.0.0/12,DIRECT
  - IP-CIDR,192.168.0.0/16,DIRECT
  - IP-CIDR,10.0.0.0/8,DIRECT
  - IP-CIDR,17.0.0.0/8,DIRECT
  - IP-CIDR,100.64.0.0/10,DIRECT
  
  # 中国大陆直连
  - GEOIP,CN,🎯 全球直连
  
  # 其他流量
  - MATCH,🐟 漏网之鱼
