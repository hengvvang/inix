# rmpc 高级配置示例
# 包含专辑封面、通知、自定义键位等高级功能

#![enable(implicit_some)]
#![enable(unwrap_newtypes)]
#![enable(unwrap_variant_newtypes)]
(
    // MPD 连接设置
    address: "127.0.0.1:6600",
    password: None,
    
    // 目录配置
    cache_dir: Some("~/.cache/rmpc"),
    lyrics_dir: Some("~/.local/share/rmpc/lyrics"),
    
    // 界面设置
    theme: None,
    max_fps: 60,
    scrolloff: 5,
    wrap_navigation: true,
    enable_mouse: true,
    enable_config_hot_reload: true,
    
    // 播放控制
    volume_step: 3,
    rewind_to_start_sec: Some(5),
    status_update_interval_ms: Some(250),
    select_current_song_on_change: true,
    center_current_song_on_change: true,
    
    // 连接超时
    mpd_read_timeout_ms: 15000,
    mpd_write_timeout_ms: 8000,
    mpd_idle_read_timeout_ms: None,
    
    // 播放列表同步
    reflect_changes_to_playlist: false,
    
    // 高质量专辑封面
    album_art: (
        method: Auto,
        max_size_px: (width: 1200, height: 1200),
        disabled_protocols: [],
        vertical_align: Center,
        horizontal_align: Center,
    ),
    
    // 通知和脚本钩子
    on_song_change: ["notify-send", "--expire-time=4000", "--icon=audio-x-generic", "♪ Now Playing", "{artist} - {title}"],
    on_resize: None,
    
    // 高级搜索配置
    search: (
        case_sensitive: false,
        mode: Contains,
        tags: [
            (value: "any", label: "任意标签"),
            (value: "artist", label: "艺术家"),
            (value: "album", label: "专辑"),
            (value: "albumartist", label: "专辑艺术家"),
            (value: "title", label: "标题"),
            (value: "filename", label: "文件名"),
            (value: "genre", label: "流派"),
            (value: "date", label: "日期"),
            (value: "composer", label: "作曲家"),
            (value: "performer", label: "演奏者"),
        ],
    ),
    
    // 艺术家视图设置
    artists: (
        album_display_mode: SplitByDate,
        album_sort_by: Date,
    ),
    
    // 排序设置
    browser_song_sort: [Disc, Track, Artist, Title],
    directories_sort: SortFormat(group_by_type: true, reverse: false),
    show_playlists_in_browser: All,
    
    // 自定义键位绑定
    keybinds: (
        global: {
            // 基本控制
            ":": CommandMode,
            "q": Quit,
            "Q": Quit,
            
            // 播放控制
            "p": TogglePause,
            "<Space>": TogglePause,
            "s": Stop,
            ">": NextTrack,
            "<": PreviousTrack,
            "f": SeekForward,
            "b": SeekBack,
            
            // 音量控制
            "+": VolumeUp,
            "=": VolumeUp,
            "-": VolumeDown,
            ",": VolumeDown,
            ".": VolumeUp,
            
            // 播放模式
            "z": ToggleRepeat,
            "x": ToggleRandom,
            "c": ToggleConsume,
            "v": ToggleSingle,
            
            // 标签页切换
            "<Tab>": NextTab,
            "<S-Tab>": PreviousTab,
            "1": SwitchToTab("Queue"),
            "2": SwitchToTab("Directories"),
            "3": SwitchToTab("Artists"),
            "4": SwitchToTab("Album Artists"),
            "5": SwitchToTab("Albums"),
            "6": SwitchToTab("Playlists"),
            "7": SwitchToTab("Search"),
            
            // 信息和帮助
            "~": ShowHelp,
            "I": ShowCurrentSongInfo,
            "O": ShowOutputs,
            "P": ShowDecoders,
            
            // 数据库操作
            "u": Update,
            "U": Rescan,
            "R": AddRandom,
        },
        
        navigation: {
            // Vim 风格导航
            "k": Up,
            "j": Down,
            "h": Left,
            "l": Right,
            
            // 方向键
            "<Up>": Up,
            "<Down>": Down,
            "<Left>": Left,
            "<Right>": Right,
            
            // 面板切换
            "<C-k>": PaneUp,
            "<C-j>": PaneDown,
            "<C-h>": PaneLeft,
            "<C-l>": PaneRight,
            
            // 快速移动
            "<C-u>": UpHalf,
            "<C-d>": DownHalf,
            "g": Top,
            "G": Bottom,
            
            // 选择和操作
            "<CR>": Confirm,
            "<Space>": Select,
            "<C-Space>": InvertSelection,
            
            // 项目操作
            "a": Add,
            "A": AddAll,
            "d": Delete,
            "D": Delete,
            "r": Rename,
            
            // 搜索和导航
            "i": FocusInput,
            "/": EnterSearch,
            "n": NextResult,
            "N": PreviousResult,
            
            // 移动操作
            "J": MoveDown,
            "K": MoveUp,
            
            // 信息和上下文
            "B": ShowInfo,
            "<C-z>": ContextMenu(),
            
            // 退出
            "<C-c>": Close,
            "<Esc>": Close,
        },
        
        queue: {
            // 播放控制
            "<CR>": Play,
            "p": Play,
            
            // 队列管理
            "d": Delete,
            "D": DeleteAll,
            "X": Shuffle,
            
            // 播放列表操作
            "a": AddToPlaylist,
            "<C-s>": Save,
            
            // 导航
            "C": JumpToCurrent,
        },
    ),
    
    // 复杂标签页布局配置
    tabs: [
        (
            name: "Queue",
            pane: Split(
                direction: Horizontal,
                panes: [
                    (size: "30%", pane: Pane(AlbumArt)),
                    (
                        size: "70%", 
                        pane: Split(
                            direction: Vertical,
                            panes: [
                                (size: "85%", pane: Pane(Queue)),
                                (size: "15%", pane: Pane(Logs)),
                            ],
                        )
                    ),
                ],
            ),
        ),
        (
            name: "Browser",
            pane: Split(
                direction: Horizontal,
                panes: [
                    (size: "50%", pane: Pane(Directories)),
                    (size: "50%", pane: Pane(Queue)),
                ],
            ),
        ),
        (
            name: "Artists",
            pane: Split(
                direction: Horizontal,
                panes: [
                    (size: "30%", pane: Pane(AlbumArt)),
                    (size: "70%", pane: Pane(Artists)),
                ],
            ),
        ),
        (
            name: "Album Artists",
            pane: Pane(AlbumArtists),
        ),
        (
            name: "Albums",
            pane: Split(
                direction: Horizontal,
                panes: [
                    (size: "25%", pane: Pane(AlbumArt)),
                    (size: "75%", pane: Pane(Albums)),
                ],
            ),
        ),
        (
            name: "Playlists",
            pane: Pane(Playlists),
        ),
        (
            name: "Search",
            pane: Split(
                direction: Vertical,
                panes: [
                    (size: "60%", pane: Pane(Search)),
                    (size: "40%", pane: Pane(Queue)),
                ],
            ),
        ),
    ],
)
