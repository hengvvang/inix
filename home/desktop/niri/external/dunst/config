# Dunst macOS Tahoe Style Configuration - Dark Theme
# macOS Tahoe 风格的 dunst 通知配置 - 深色主题
# 模仿 macOS 通知中心的视觉效果和交互体验

[global]
    # ===============================================
    # 基础外观设置
    # ===============================================

    # 字体配置 - LXGW WenKai Mono 13pt
    font = LXGW WenKai Mono 13

    # 通知尺寸和位置
    width = 380
    height = 120
    origin = top-right
    offset = 16x16

    # 内边距设置
    padding = 20
    horizontal_padding = 24
    text_icon_padding = 16

    # 框架设置
    frame_width = 0
    frame_color = "#ffffff10"

    # 分隔符设置
    separator_height = 1
    separator_color = "#ffffff08"

    # 圆角设置
    corner_radius = 18

    # ===============================================
    # 行为设置
    # ===============================================

    # 超时设置
    idle_threshold = 120

    # 最大通知数量
    notification_limit = 5

    # 指示器设置
    indicate_hidden = yes

    # 排序方式
    sort = yes

    # 历史设置
    history_length = 100

    # 显示年龄
    show_age_threshold = 60

    # 换行设置
    word_wrap = yes
    ellipsize = middle

    # 忽略换行符
    ignore_newline = no

    # 堆叠设置
    stack_duplicates = true
    hide_duplicate_count = false

    # 显示指示器
    show_indicators = yes

    # ===============================================
    # 图标设置
    # ===============================================

    # 图标位置
    icon_position = left

    # 图标大小
    min_icon_size = 32
    max_icon_size = 48

    # 图标路径
    icon_path = /run/current-system/sw/share/icons/Papirus-Dark:/run/current-system/sw/share/icons/hicolor

    # ===============================================
    # 交互设置
    # ===============================================

    # 鼠标操作
    mouse_left_click = close_current
    mouse_middle_click = do_action, close_current
    mouse_right_click = close_all

    # 跟随设置
    follow = mouse

    # ===============================================
    # 高级设置
    # ===============================================

    # 标记语言支持
    markup = full

    # 格式化
    format = "<b>%s</b>\n%b"

    # 对齐方式
    alignment = left
    vertical_alignment = center

    # 透明度
    transparency = 10

    # 层级
    layer = overlay

    # 强制 Xinerama
    force_xinerama = false

    # 缩放因子
    scale = 0

    # ===============================================
    # 进度条设置
    # ===============================================

    # 进度条
    progress_bar = true
    progress_bar_height = 8
    progress_bar_frame_width = 0
    progress_bar_min_width = 150
    progress_bar_max_width = 300
    progress_bar_corner_radius = 4

    # ===============================================
    # 键盘快捷键
    # ===============================================

    # 关闭通知
    close = ctrl+space

    # 关闭所有通知
    close_all = ctrl+shift+space

    # 历史记录
    history = ctrl+grave

    # 上下文菜单
    context = ctrl+shift+period

# ===============================================
# 紧急程度样式定义
# ===============================================

[urgency_low]
    # 低优先级通知 - 淡色毛玻璃
    background = "#1d1d1f12"
    foreground = "#8e8e93ff"
    frame_color = "#ffffff08"
    timeout = 3
    icon = /run/current-system/sw/share/icons/Papirus-Dark/22x22/status/notification.svg

[urgency_normal]
    # 普通优先级通知 - 标准毛玻璃
    background = "#1d1d1f18"
    foreground = "#f2f2f7ff"
    frame_color = "#ffffff10"
    timeout = 5
    icon = /run/current-system/sw/share/icons/Papirus-Dark/22x22/status/notification.svg

[urgency_critical]
    # 高优先级/紧急通知 - 红色强调
    background = "#ff453a25"
    foreground = "#ffffffff"
    frame_color = "#ff453a80"
    frame_width = 2
    timeout = 0
    icon = /run/current-system/sw/share/icons/Papirus-Dark/22x22/status/notification-error.svg

# ===============================================
# 特定应用的自定义样式
# ===============================================

[appname_System]
    background = "#007aff20"
    foreground = "#ffffffff"
    frame_color = "#007aff60"
    timeout = 8

[appname_Music]
    background = "#32d74b20"
    foreground = "#ffffffff"
    frame_color = "#32d74b60"
    min_icon_size = 40
    max_icon_size = 60
    timeout = 4

[appname_Spotify]
    background = "#32d74b20"
    foreground = "#ffffffff"
    frame_color = "#32d74b60"
    min_icon_size = 40
    max_icon_size = 60
    timeout = 4

[appname_mpv]
    background = "#32d74b20"
    foreground = "#ffffffff"
    frame_color = "#32d74b60"
    min_icon_size = 40
    max_icon_size = 60
    timeout = 4

[appname_Discord]
    background = "#5856d620"
    foreground = "#ffffffff"
    frame_color = "#5856d660"
    timeout = 6

[appname_Telegram]
    background = "#5856d620"
    foreground = "#ffffffff"
    frame_color = "#5856d660"
    timeout = 6

[appname_Signal]
    background = "#5856d620"
    foreground = "#ffffffff"
    frame_color = "#5856d660"
    timeout = 6

[appname_Mail]
    background = "#ff950020"
    foreground = "#ffffffff"
    frame_color = "#ff950060"
    timeout = 8

[appname_Thunderbird]
    background = "#ff950020"
    foreground = "#ffffffff"
    frame_color = "#ff950060"
    timeout = 8

# ===============================================
# 基于内容的过滤规则
# ===============================================

# 错误通知
[summary_error]
    summary = "*[Ee]rror*"
    background = "#ff453a30"
    foreground = "#ffffffff"
    frame_color = "#ff453aaa"
    frame_width = 2
    urgency = critical
    timeout = 0

[summary_failed]
    summary = "*[Ff]ailed*"
    background = "#ff453a30"
    foreground = "#ffffffff"
    frame_color = "#ff453aaa"
    frame_width = 2
    urgency = critical
    timeout = 0

# 成功通知
[summary_success]
    summary = "*[Ss]uccess*"
    background = "#32d74b25"
    foreground = "#ffffffff"
    frame_color = "#32d74b80"
    urgency = low
    timeout = 3

[summary_complete]
    summary = "*[Cc]omplete*"
    background = "#32d74b25"
    foreground = "#ffffffff"
    frame_color = "#32d74b80"
    urgency = low
    timeout = 3

[summary_done]
    summary = "*[Dd]one*"
    background = "#32d74b25"
    foreground = "#ffffffff"
    frame_color = "#32d74b80"
    urgency = low
    timeout = 3

# 警告通知
[summary_warning]
    summary = "*[Ww]arning*"
    background = "#ff950025"
    foreground = "#ffffffff"
    frame_color = "#ff950080"
    urgency = normal
    timeout = 6

# ===============================================
# 进度条颜色设置
# ===============================================

# 普通进度条
[urgency_normal]
    progress_bar_frame_color = "#007affff"
    highlight = "#007affff"

# 低优先级进度条
[urgency_low]
    progress_bar_frame_color = "#8e8e9350"
    highlight = "#8e8e9350"

# 高优先级进度条
[urgency_critical]
    progress_bar_frame_color = "#ff453aff"
    highlight = "#ff453aff"

# ===============================================
# 使用说明和调试
# ===============================================

# 配置使用说明：
# 1. 确保安装了 LXGW WenKai Mono 字体
# 2. 确保安装了 Papirus-Dark 图标主题
# 3. 在 niri 配置中启动 dunst：spawn-at-startup "dunst"
# 4. 使用 dunstctl 命令控制通知：
#    - dunstctl close: 关闭通知
#    - dunstctl close-all: 关闭所有通知
#    - dunstctl history-pop: 显示历史
#    - dunstctl action: 执行操作
#    - dunstctl reload: 重新加载配置
#
# 5. 测试通知：
#    notify-send "Test" "这是一个测试通知"
#    notify-send -u critical "重要" "这是紧急通知"
#
# 6. 键盘快捷键（需要窗口管理器支持）：
#    - Ctrl+Space: 关闭当前通知
#    - Ctrl+Shift+Space: 关闭所有通知
#    - Ctrl+`: 显示历史记录
#
# 最佳效果建议：
# - 使用有对比度的壁纸以突出毛玻璃效果
# - 确保合成器支持真透明度
# - 调整显示器亮度以获得最佳视觉体验
# - 考虑使用 picom 等合成器增强透明效果
