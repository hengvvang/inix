// =============================================================================
// niri 主配置文件
// =============================================================================
// 使用 KDL (https://kdl.dev) 格式
// 官方文档: https://github.com/YaLTeR/niri/wiki/Configuration:-Introduction
//
// 此配置采用模块化结构,使用 include 语法将配置拆分到多个文件中
// 这样可以更好地组织和维护配置
//
// include 功能自 niri 25.11 版本开始支持
// =============================================================================

// =============================================================================
// 核心配置模块
// =============================================================================
// 按照逻辑顺序引入各个配置模块
// include 是位置相关的,后面的配置会覆盖前面的配置

// 启动服务配置
// 定义 niri 启动时自动运行的程序和服务
include "startup.kdl"

// 环境变量配置
// 设置应用程序的环境变量,影响缩放、Xwayland 等
include "environment.kdl"

// 光标配置
// =============================================================================
// 单独的光标设置,不放在单独文件中
// =============================================================================
cursor {
    // X 光标主题
    // 设置鼠标光标的外观主题
    xcursor-theme "macOS"

    // X 光标大小(逻辑像素)
    // 24 是标准大小,适合大多数屏幕
    xcursor-size 24

    // 打字时隐藏光标 (可选)
    // 取消下面的注释以启用
    // hide-when-typing

    // 空闲后隐藏光标 (可选)
    // 在指定毫秒数的不活动后隐藏光标
    // hide-after-inactive-ms 1000
}

// 输入设备配置
// 定义键盘、触摸板、鼠标等输入设备的行为
include "input.kdl"

// 显示输出配置
// 定义显示器的分辨率、刷新率、缩放等设置
include "output.kdl"

// 布局配置
// 定义窗口布局、间隙、焦点环、边框、阴影等
include "layout.kdl"

// =============================================================================
// 其他顶层配置选项
// =============================================================================

// 禁用客户端装饰 (CSD)
// 强制应用程序使用服务器端装饰 (SSD)
// 这样可以获得更一致的窗口外观
prefer-no-csd

// 热键覆盖层配置
// =============================================================================
hotkey-overlay {
    // 在启动时跳过"重要热键"弹出窗口
    // 取消此行的注释以禁用启动提示
    skip-at-startup
}

// 截图路径配置
// =============================================================================
// 路径使用 strftime(3) 格式化,提供截图的日期和时间
screenshot-path "~/Pictures/Screenshots/Screenshot from %Y-%m-%d %H-%M-%S.png"

// 禁用截图保存到磁盘 (可选)
// 取消下面的注释以禁用截图保存
// screenshot-path null

// 动画配置
// 定义各种窗口和工作区动画的行为
include "animations.kdl"

// 手势配置
// 定义触摸屏和鼠标手势的行为
include "gestures.kdl"

// 窗口规则配置
// 定义各类窗口的外观和行为规则
// 注意: 窗口规则的顺序很重要,后面的规则会覆盖前面的规则
include "window-rules.kdl"

// 最近窗口切换器配置 (Alt+Tab 窗口切换)
// 定义窗口切换器的外观、行为和快捷键
include "recent-windows.kdl"

// 快捷键绑定配置
// 定义所有键盘快捷键和鼠标/触摸板手势
// 重要: binds 块不会自动填充默认值,确保不要删除此 include
include "binds.kdl"

// =============================================================================
// 配置文件组织说明
// =============================================================================
//
// 本配置采用模块化设计,各个配置文件的职责如下:
//
// startup.kdl       - 启动服务和自动运行程序
// environment.kdl   - 环境变量设置
// input.kdl         - 输入设备配置 (键盘、触摸板、鼠标等)
// output.kdl        - 显示输出配置 (显示器设置)
// layout.kdl        - 窗口布局和视觉效果
// animations.kdl    - 动画效果配置
// gestures.kdl      - 手势配置
// window-rules.kdl  - 窗口规则和样式
// binds.kdl         - 快捷键绑定
//
// 优点:
// - 更容易找到和修改特定设置
// - 可以独立测试和重载各个模块
// - 便于版本控制和协作
// - 减少单个文件的复杂度
//
// =============================================================================
// 配置热重载
// =============================================================================
//
// niri 支持配置热重载,保存任何配置文件后会自动应用更改
// 包括所有 include 的文件
//
// 验证配置: niri validate
// 查看输出设备: niri msg outputs
// 查看窗口信息: niri msg windows
//
// =============================================================================
