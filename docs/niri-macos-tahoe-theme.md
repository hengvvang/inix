# niri macOS Tahoe 流体玻璃胶囊主题配置

## 主题概述

基于 niri 官方文档，为您配置了一套模仿 macOS Tahoe 风格的流体玻璃透明胶囊主题。此主题注重现代感、流体动画和玻璃质感效果。

## 设计特点

### 🔮 流体玻璃效果
- **半透明窗口**: 活跃窗口 95% 不透明度，非活跃窗口 88% 不透明度
- **玻璃层次**: 浮动窗口获得更强的透明效果
- **材质感**: 通过透明度和阴影营造玻璃质感

### 🫧 胶囊形状设计
- **圆角窗口**: 12px 标准圆角，16px 浮动窗口圆角
- **胶囊效果**: 通知类窗口使用 25px 圆角，完全胶囊化
- **裁剪优化**: 启用 clip-to-geometry 确保内容不溢出

### ✨ 现代渐变色彩
- **活跃焦点环**: 蓝色系渐变 (#007AFF → #5AC8FA)
- **非活跃焦点环**: 柔和灰色渐变 (#48484a → #636366)
- **浏览器特化**: 橙色系渐变增强视觉识别

### 🌊 流体动画系统
- **弹簧物理**: 使用 spring 动画模拟真实物理反馈
- **自定义着色器**: 窗口打开/关闭的光晕和收缩效果
- **优雅过渡**: 0.85 倍速度确保动画优雅而不缓慢

### 🎯 精准阴影效果
- **浮动阴影**: 25px 柔和度，8px 垂直偏移
- **层次感**: 浮动窗口获得更强的 35px 阴影
- **真实感**: draw-behind-window 创造真实的浮动效果

## 配置详情

### 布局配置 (Layout)
```kdl
layout {
    gaps 12                              // 适中间隙
    center-focused-column "on-overflow"  // 智能居中
    always-center-single-column         // 单窗口居中
    background-color "#1c1c1e"         // 深色背景
    default-column-width { proportion 0.618; } // 黄金比例
}
```

### 焦点环配置
```kdl
focus-ring {
    width 1.5  // 细腻边框
    active-gradient from="#007AFF" to="#5AC8FA" angle=135
    inactive-gradient from="#48484a" to="#636366" angle=135
}
```

### 阴影效果
```kdl
shadow {
    on
    draw-behind-window true
    softness 25
    spread 2
    offset x=0 y=8
    color "#00000040"
}
```

### 动画系统
```kdl
animations {
    slowdown 0.85  // 稍微放慢获得优雅效果
    
    window-open {
        duration-ms 350
        curve "ease-out-expo"
        custom-shader r"..."  // 自定义光晕效果
    }
    
    workspace-switch {
        spring damping-ratio=0.8 stiffness=900 epsilon=0.0001
    }
}
```

## 应用特化规则

### 🖥️ 终端应用
- **应用**: Alacritty, Rio, Kitty, WezTerm
- **特点**: 92% 不透明度，10px 圆角
- **目的**: 确保文字清晰可读

### 🌐 浏览器应用
- **应用**: Firefox, Chrome, Chromium
- **特点**: 橙色焦点环，12px 圆角
- **目的**: 视觉识别和主题协调

### 🎬 媒体播放器
- **应用**: MPV, VLC, 画中画
- **特点**: 20px 大圆角，强阴影效果
- **目的**: 突出媒体内容

### 🔔 系统对话框
- **应用**: 文件选择器, Zenity
- **特点**: 85% 透明度，16px 圆角
- **目的**: 最强玻璃效果

### 📢 通知窗口
- **应用**: Mako, Dunst
- **特点**: 25px 圆角，80% 透明度
- **目的**: 完全胶囊化外观

## 色彩方案

### 主色调
- **活跃蓝**: #007AFF (iOS 蓝)
- **辅助蓝**: #5AC8FA (浅蓝)
- **中性灰暗**: #48484a
- **中性灰亮**: #636366

### 特殊色彩
- **浏览器橙**: #FF6B35 → #F7931E
- **媒体粉**: #FF2D92 → #FF6B35
- **背景深色**: #1c1c1e

## 使用建议

### 🎨 视觉效果
1. **启用背景模糊**: 建议配合 waybar 使用背景模糊
2. **壁纸选择**: 深色或中性色调壁纸效果最佳
3. **字体渲染**: 确保终端字体支持亚像素渲染

### ⚡ 性能优化
1. **GPU 加速**: 确保启用 GPU 加速以获得流畅动画
2. **合成器**: 建议使用支持硬件加速的合成器
3. **资源监控**: 透明效果可能增加 GPU 使用率

### 🔧 自定义调整
1. **透明度**: 可调整各规则中的 opacity 值
2. **圆角大小**: 修改 geometry-corner-radius 值
3. **动画速度**: 调整 slowdown 值或各动画参数
4. **阴影强度**: 修改 softness, spread, offset 参数

## 兼容性说明

- **niri 版本**: 需要 niri 25.02 或更高版本
- **功能支持**: 需要支持自定义着色器的 GPU
- **系统要求**: 建议使用现代 GPU 以获得最佳效果

## 故障排除

### 动画卡顿
- 检查 GPU 驱动程序
- 降低 slowdown 值
- 简化自定义着色器

### 透明效果异常
- 确认合成器支持透明度
- 检查窗口管理器配置
- 验证 clip-to-geometry 设置

### 颜色显示问题
- 确认显示器色彩配置
- 检查色彩空间设置
- 验证渐变插值方法

---

*此主题配置基于 niri 官方文档创建，保留了所有原有配置注释，可随时回滚到原始设置。*
